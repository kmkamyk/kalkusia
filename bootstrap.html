<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkusia - Kalkulator proporcji kawy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    /* Funkcja obliczająca proporcje kawy do napoju */
    function calculate() {
      var water = parseFloat(document.getElementById("water").value);
      var coffeeRatio = parseFloat(document.getElementById("coffeeRatio").value);
      var coffee = water * coffeeRatio / 100;
      document.getElementById("coffee").value = coffee.toFixed(1);

      /* Zmiana wartości dla stalych w przepisie */
      document.getElementById("waterRecipe").innerHTML = water.toFixed(0) + " g";
      document.getElementById("coffeeRecipe").innerHTML = coffee.toFixed(1) + " g";

      /* Zmiana ilosci wody dla przepisu przepisu */
      var waterStep1 = 50;
      var waterSteps = [waterStep1, 40, 60, 80, 100];
      for (var i = 1; i <= waterSteps.length; i++) {
        document.getElementById("waterStep" + i).innerHTML = (waterSteps[i-1] * water / 100).toFixed(0) + " g";
      }
    }

    /* Funkcja ustawiająca wartość pola wyboru stosunku kawy do wody na podstawie klikniętego przycisku */
    function setCoffeeRatio(ratio) {
      document.getElementById("coffeeRatio").value = ratio;
      calculate();
    }

    /* Funkcja ustawiająca wartość pola ilości wody na podstawie klikniętego przycisku */
    function setWater(amount) {
      document.getElementById("water").value = amount;
      calculate();
    }
  </script>
</head>
<body>
  <div class="container-fluid p-3 bg-light text-dark text-center">
    <h1>Kalkusia</h1>
    <p>Kalkulator proporcji kawy do wody przy metodach alternatywnych (Aeropress, Drip, Chemex)</p>
    <p>
      <a class="btn btn-dark" href="https://github.com/kmkamyk/kalkusia" role="button">Dowiedz się więcej &raquo;</a>
    </p>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col p-4 bg-primary text-white">
        <div class="d-flex justify-content-center align-items-center">
          <form style="max-width: 500px;">
            <div class="text-center mb-3">
              <label for="water" class="form-label"><h5>Ilość wody (ml):</h5></label>
              <br>
                <div class="btn-group" role="group" aria-label="Ilość wody">
                  <button type="button" class="btn btn-light btn-lg" onclick="setWater(200)">200 ml</button>
                  <button type="button" class="btn btn-light btn-lg" onclick="setWater(250)">250 ml</button>
                  <button type="button" class="btn btn-light btn-lg" onclick="setWater(300)">300 ml</button>
                  <button type="button" class="btn btn-light btn-lg" onclick="setWater(330)">330 ml</button>
                  <button type="button" class="btn btn-light btn-lg" onclick="setWater(500)">500 ml</button>
                </div>
            </div>
            <div class="text-center mb-3">
              <input type="number" class="form-control form-control-lg" id="water" name="water" min="1" max="10000" step="1" value="100" onchange="calculate()">
            </div>
            <div class="text-center mb-3">
              <label for="coffeeRatio" class="form-label"><h5>Stosunek kawy do wody:</h5></label>
                <br>
                <div class="btn-group" role="group" aria-label="Stosunek kawy do wody">
                  <button type="button" class="btn btn-light btn-lg" onclick="setCoffeeRatio(7)">7 na 100</button>
                  <button type="button" class="btn btn-light btn-lg" onclick="setCoffeeRatio(6)">6 na 100</button>
                </div>
              <input type="hidden" id="coffeeRatio" name="coffeeRatio" value="7" onchange="calculate()">
            </div>
            <div class="text-center mb-3">
              <label for="coffee" class="form-label"><h5>Ilość kawy (g):</h5></label>
              <input type="text" class="form-control form-control-lg" id="coffee" name="coffee" readonly>
            </div>
          </form>
        </div>   
      </div>
      <div class="col p-4 bg-primary text-white">
        <ul class="list-group">
          <li class="list-group-item active bg-dark text-center" aria-current="true">
            <h5>Przepis V60</h5>
            <p>
              <span id="coffeeRecipe">15</span> kawy mielonej oraz<span id="waterRecipe"> 250</span> przefiltrowanej wody
            </p>
          </li>
          <li class="list-group-item">0m00s: Wlej <span id="waterStep1">50 g</span> wody</li>
          <li class="list-group-item">0m10s - 0m15s: Delikatnie zawiruj kawe</li>
          <li class="list-group-item">0m00s - 0m45s: Rozkwit kawy</li>
          <li class="list-group-item">0m45s - 1m00s: Wlej łącznie do <span id="waterStep2">100</span> (40% wody)</li>
          <li class="list-group-item">1m00s - 1m10s: Pauza</li>
          <li class="list-group-item">1m10s - 1m20s: Wlej łącznie do <span id="waterStep3">150</span> (60% wody)</li>
          <li class="list-group-item">1m20s - 1m30s: Pauza</li>
          <li class="list-group-item">1m30s - 1m40s: Wlej łącznie do <span id="waterStep4">200</span> (80% wody)</li>
          <li class="list-group-item">1m40s - 1m50s: Pauza</li>
          <li class="list-group-item">1m50s - 2m00s: Wlej łącznie do <span id="waterStep5">250</span> (100% wody)</li>
          <li class="list-group-item">2m00s - 2m05s: Delikatnie zawiruj kawe</li>
          <li class="list-group-item">Parzenie powinien zakończyć się około 3:00</li>
        </ul>
      </div>
    </div>
  </div>
  <!-- Footer -->
  <footer class="footer bg-dark">
    <div class="container">
      <p class="text-light">&copy; 2023 - Kamil Pytliński</p>
    </div>
  </footer>
</body>
</html>